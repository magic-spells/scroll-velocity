{"version":3,"file":"scroll-velocity.cjs.js","sources":["../src/scroll-velocity.js"],"sourcesContent":["/*\n\tscroll-velocity (loose + responsive)\n\t-----------------------------------\n\tthis is a drop-in velocity tracker tuned to feel looser and more responsive like your older manager.\n\tit keeps the same basic physics: blend-to-target (dampening), then rAF decay (friction * attraction),\n\tand exposes both a normalized css var and the raw velocity so css can decide how extreme to map things.\n\n\tkey differences vs your recent \"new\" version:\n\t- uses delta-based sampling by default (like the older code) for that immediate, punchy feel\n\t- normalization is relative to maxVelocity (not a fixed divisor), so [-1..1] matches your configured clamp\n\t- writes extra css vars: --scroll-velocity-abs, --scroll-velocity-pow, --scroll-velocity-raw\n\t- respects prefers-reduced-motion\n\n\tusage\n\t-----\n\timport { ScrollVelocity } from './scroll-velocity-loose.js';\n\tconst sv = new ScrollVelocity({\n\t\ttarget: document.body,   // element that will receive the css vars\n\t\tsampleMode: 'delta',     // 'delta' | 'time' (time = px/ms); use 'delta' for older feel\n\t\tdampening: 0.35,         // higher = chases peaks faster (snappier), lower = smoother/laggier\n\t\tfriction: 0.92,          // how much velocity persists per frame (0..1)\n\t\tattraction: 0.96,        // gentle pull toward zero each frame (0..1)\n\t\tthreshold: 0.02,         // stop when |velocity| < threshold\n\t\tmaxVelocity: 200,        // clamp for raw velocity; normalization uses this value\n\t\twriteCSSVariables: true, // set to false if you only want programmatic reads\n\t\trespectReducedMotion: true\n\t});\n\tsv.start();\n\t// sv.stop(); sv.getVelocity(); sv.getNormalizedVelocity(); sv.setOptions({ ... })\n*/\n\n/**\n * @typedef {Object} ScrollVelocityOptions\n * @property {HTMLElement} [target=document.body] element to receive css variables\n * @property {('delta'|'time')} [sampleMode='delta'] how to sample scroll input; 'delta' mimics the old feel\n * @property {number} [dampening=0.35] blend factor toward target; higher chases peaks faster\n * @property {number} [friction=0.92] multiplicative decay per frame (0..1)\n * @property {number} [attraction=0.96] multiplicative pull toward zero per frame (0..1)\n * @property {number} [threshold=0.02] below this absolute velocity, snap to zero\n * @property {number} [maxVelocity=200] absolute clamp for the raw velocity (used for normalization)\n * @property {boolean} [writeCSSVariables=true] whether to write css custom properties\n * @property {boolean} [respectReducedMotion=true] if true, disables velocity when user prefers reduced motion\n */\n\n/**\n * clamp helper: keeps a number within a range\n * @param {number} value\n * @param {number} min\n * @param {number} max\n * @returns {number}\n */\nfunction clamp(value, min, max) {\n\treturn Math.max(min, Math.min(max, value));\n}\n\n/**\n * scroll-velocity: loose, responsive version\n * tracks signed scroll velocity and exposes both raw and normalized values.\n */\nexport class ScrollVelocity {\n\t/**\n\t * @param {ScrollVelocityOptions} [options] see typedef above\n\t */\n\tconstructor(options = {}) {\n\t\t// config with loose, responsive defaults\n\t\tthis.target = options.target || document.body;\n\t\tthis.sampleMode = options.sampleMode || \"delta\";\n\t\tthis.dampening =\n\t\t\ttypeof options.dampening === \"number\" ? options.dampening : 0.35;\n\t\tthis.friction =\n\t\t\ttypeof options.friction === \"number\" ? options.friction : 0.92;\n\t\tthis.attraction =\n\t\t\ttypeof options.attraction === \"number\" ? options.attraction : 0.96;\n\t\tthis.threshold =\n\t\t\ttypeof options.threshold === \"number\" ? options.threshold : 0.02;\n\t\tthis.maxVelocity =\n\t\t\ttypeof options.maxVelocity === \"number\" ? options.maxVelocity : 200;\n\t\tthis.writeCSSVariables = options.writeCSSVariables !== false;\n\t\tthis.respectReducedMotion = options.respectReducedMotion !== false;\n\n\t\t// internal state\n\t\tthis._isRunning = false;\n\t\tthis._rafId = 0;\n\t\tthis._velocity = 0; // raw signed velocity (unit depends on sampling mode)\n\t\tthis._lastScrollY = 0;\n\t\tthis._lastTime = 0; // performance.now() timestamp for time sampling\n\t\tthis._boundOnScroll = this._onScroll.bind(this);\n\t\tthis._boundOnRaf = this._onRaf.bind(this);\n\t}\n\n\t/**\n\t * start tracking and writing css variables\n\t */\n\tstart() {\n\t\tif (this._isRunning) return;\n\t\tthis._isRunning = true;\n\t\tthis._lastScrollY = window.scrollY || window.pageYOffset || 0;\n\t\tthis._lastTime = performance.now();\n\t\twindow.addEventListener(\"scroll\", this._boundOnScroll, { passive: true });\n\t\tthis._rafId = requestAnimationFrame(this._boundOnRaf);\n\t}\n\n\t/** stop tracking */\n\tstop() {\n\t\tif (!this._isRunning) return;\n\t\tthis._isRunning = false;\n\t\twindow.removeEventListener(\"scroll\", this._boundOnScroll);\n\t\tif (this._rafId) cancelAnimationFrame(this._rafId);\n\t\tthis._rafId = 0;\n\t\tthis._velocity = 0;\n\t\tthis._writeCSS(0);\n\t}\n\n\t/**\n\t * update runtime options without reconstructing\n\t * @param {Partial<ScrollVelocityOptions>} nextOptions\n\t */\n\tsetOptions(nextOptions = {}) {\n\t\tif (\"target\" in nextOptions && nextOptions.target)\n\t\t\tthis.target = nextOptions.target;\n\t\tif (\"sampleMode\" in nextOptions)\n\t\t\tthis.sampleMode = nextOptions.sampleMode || \"delta\";\n\t\tif (\"dampening\" in nextOptions && typeof nextOptions.dampening === \"number\")\n\t\t\tthis.dampening = nextOptions.dampening;\n\t\tif (\"friction\" in nextOptions && typeof nextOptions.friction === \"number\")\n\t\t\tthis.friction = nextOptions.friction;\n\t\tif (\n\t\t\t\"attraction\" in nextOptions &&\n\t\t\ttypeof nextOptions.attraction === \"number\"\n\t\t)\n\t\t\tthis.attraction = nextOptions.attraction;\n\t\tif (\"threshold\" in nextOptions && typeof nextOptions.threshold === \"number\")\n\t\t\tthis.threshold = nextOptions.threshold;\n\t\tif (\n\t\t\t\"maxVelocity\" in nextOptions &&\n\t\t\ttypeof nextOptions.maxVelocity === \"number\"\n\t\t)\n\t\t\tthis.maxVelocity = nextOptions.maxVelocity;\n\t\tif (\"writeCSSVariables\" in nextOptions)\n\t\t\tthis.writeCSSVariables = !!nextOptions.writeCSSVariables;\n\t\tif (\"respectReducedMotion\" in nextOptions)\n\t\t\tthis.respectReducedMotion = !!nextOptions.respectReducedMotion;\n\t}\n\n\t/**\n\t * get the current raw velocity (signed)\n\t * @returns {number}\n\t */\n\tgetVelocity() {\n\t\treturn this._velocity;\n\t}\n\n\t/**\n\t * get normalized velocity in [-1, 1], relative to maxVelocity\n\t * @returns {number}\n\t */\n\tgetNormalizedVelocity() {\n\t\tif (this.maxVelocity <= 0) return 0;\n\t\treturn clamp(this._velocity / this.maxVelocity, -1, 1);\n\t}\n\n\t// internal: scroll handler\n\t_onScroll() {\n\t\t// honor reduced motion preference\n\t\tif (\n\t\t\tthis.respectReducedMotion &&\n\t\t\twindow.matchMedia &&\n\t\t\twindow.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\n\t\t) {\n\t\t\tthis._velocity = 0;\n\t\t\tthis._writeCSS(0);\n\t\t\t// still schedule rAF so we keep variables fresh\n\t\t\tif (!this._rafId) this._rafId = requestAnimationFrame(this._boundOnRaf);\n\t\t\treturn;\n\t\t}\n\n\t\tconst y = window.scrollY || window.pageYOffset || 0;\n\t\tconst now = performance.now();\n\t\tconst deltaY = y - this._lastScrollY;\n\t\tconst deltaT = now - this._lastTime || 16.7; // ms\n\t\tthis._lastScrollY = y;\n\t\tthis._lastTime = now;\n\n\t\t// sampling modes\n\t\tlet instantaneous;\n\t\tif (this.sampleMode === \"time\") {\n\t\t\t// time-aware: pixels per millisecond (feels consistent across event coalescing)\n\t\t\tinstantaneous = deltaT > 0 ? deltaY / deltaT : 0; // px per ms\n\t\t\t// scale up to be comparable with old raw deltas so the numbers feel punchy\n\t\t\tinstantaneous *= 12; // tuning factor; adjust to taste\n\t\t} else {\n\t\t\t// delta-based: raw pixels since last event (older feel; punchy)\n\t\t\tinstantaneous = deltaY; // px\n\t\t}\n\n\t\t// blend toward target (looser response uses higher dampening)\n\t\tconst targetVelocity = this._velocity + instantaneous;\n\t\tthis._velocity += (targetVelocity - this._velocity) * this.dampening;\n\t\tthis._velocity = clamp(this._velocity, -this.maxVelocity, this.maxVelocity);\n\n\t\t// make sure rAF loop is running\n\t\tif (!this._rafId) this._rafId = requestAnimationFrame(this._boundOnRaf);\n\t}\n\n\t// internal: animation frame decay + css write\n\t_onRaf() {\n\t\tthis._rafId = 0;\n\n\t\t// decay step (skip if reduced motion)\n\t\tif (\n\t\t\t!(\n\t\t\t\tthis.respectReducedMotion &&\n\t\t\t\twindow.matchMedia &&\n\t\t\t\twindow.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\n\t\t\t)\n\t\t) {\n\t\t\tthis._velocity *= this.friction;\n\t\t\tthis._velocity *= this.attraction;\n\t\t\tif (Math.abs(this._velocity) < this.threshold) this._velocity = 0;\n\t\t}\n\n\t\tthis._writeCSS(this.getNormalizedVelocity());\n\n\t\t// continue while moving\n\t\tif (this._isRunning && Math.abs(this._velocity) > 0) {\n\t\t\tthis._rafId = requestAnimationFrame(this._boundOnRaf);\n\t\t}\n\t}\n\n\t// internal: write css variables\n\t_writeCSS(normalized) {\n\t\tif (!this.writeCSSVariables || !this.target || !this.target.style) return;\n\t\tconst abs = Math.abs(normalized);\n\t\t// non-linear boost for mid-range perception\n\t\tconst pow = Math.min(1, Math.pow(abs, 0.7) * 1.35);\n\t\tthis.target.style.setProperty(\n\t\t\t\"--scroll-velocity\",\n\t\t\tString(normalized.toFixed(4)),\n\t\t);\n\t\tthis.target.style.setProperty(\n\t\t\t\"--scroll-velocity-abs\",\n\t\t\tString(abs.toFixed(4)),\n\t\t);\n\t\tthis.target.style.setProperty(\n\t\t\t\"--scroll-velocity-pow\",\n\t\t\tString(pow.toFixed(4)),\n\t\t);\n\t\tthis.target.style.setProperty(\n\t\t\t\"--scroll-velocity-raw\",\n\t\t\tString(this._velocity.toFixed(2)),\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"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"}